<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					xmlns:android="http://uno.ui/android"
					xmlns:contract12NotPresent="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractNotPresent(Windows.Foundation.UniversalApiContract,12)"
					xmlns:contract12Present="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract,12)"
					xmlns:contract4Present="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract,4)"
					xmlns:contract5NotPresent="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractNotPresent(Windows.Foundation.UniversalApiContract,5)"
					xmlns:contract6NotPresent="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractNotPresent(Windows.Foundation.UniversalApiContract,6)"
					xmlns:contract6Present="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract,6)"
					xmlns:contract7NotPresent="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractNotPresent(Windows.Foundation.UniversalApiContract,7)"
					xmlns:contract7Present="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract,7)"
					xmlns:contract8Present="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract,8)"
					xmlns:ios="http://uno.ui/ios"
					xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
					xmlns:mobile="http://uno.ui/mobile"
					xmlns:not_mobile="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					xmlns:not_win="http://uno.ui/not_win"
					xmlns:toolkit="using:Uno.UI.Toolkit"
					xmlns:um="using:Uno.Material"
					xmlns:ut="using:Uno.Themes"
					xmlns:utu="using:Uno.Toolkit.UI"
					xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					mc:Ignorable="android ios not_win mobile">

	<ResourceDictionary.ThemeDictionaries>
		<ResourceDictionary x:Key="Default">

			<!-- NavigationBar default resources -->
			<StaticResource x:Key="NavigationBarCommandBarEllipsisIconForegroundDisabled" ResourceKey="CommandBarEllipsisIconForegroundDisabled" />
			<StaticResource x:Key="NavigationBarCommandBarBackgroundCompactOpenUp" ResourceKey="SurfaceBrush" />
			<StaticResource x:Key="NavigationBarCommandBarBackgroundCompactOpenDown" ResourceKey="SurfaceBrush" />

			<StaticResource x:Key="NavigationBarMainCommandForeground" ResourceKey="OnSurfaceBrush" />
			<StaticResource x:Key="NavigationBarForeground" ResourceKey="OnSurfaceBrush" />
			<StaticResource x:Key="NavigationBarBackground" ResourceKey="SurfaceBrush" />
			<Thickness x:Key="NavigationBarPadding">4,0,0,0</Thickness>
			<StaticResource x:Key="NavigationBarFontFamily" ResourceKey="TitleLargeFontFamily" />
			<StaticResource x:Key="NavigationBarFontWeight" ResourceKey="TitleLargeFontWeight" />
			<StaticResource x:Key="NavigationBarFontSize" ResourceKey="TitleLargeFontSize" />

			<!-- MaterialModal Styles Resource -->
			<StaticResource x:Key="MaterialModalNavigationBarMainCommandForeground" ResourceKey="OnSurfaceBrush" />
			<StaticResource x:Key="MaterialModalNavigationBarForeground" ResourceKey="OnSurfaceBrush" />
			<StaticResource x:Key="MaterialModalNavigationBarBackground" ResourceKey="SurfaceBrush" />

			<!-- PrimaryMaterial Styles Resource -->
			<StaticResource x:Key="MaterialPrimaryNavigationBarCommandBarEllipsisIconForegroundDisabled" ResourceKey="CommandBarEllipsisIconForegroundDisabled" />
			<StaticResource x:Key="MaterialPrimaryNavigationBarCommandBarBackgroundCompactOpenUp" ResourceKey="PrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryNavigationBarCommandBarBackgroundCompactOpenDown" ResourceKey="PrimaryBrush" />

			<StaticResource x:Key="MaterialPrimaryNavigationBarMainCommandForeground" ResourceKey="OnPrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryNavigationBarForeground" ResourceKey="OnPrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryNavigationBarBackground" ResourceKey="PrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryAppBarButtonForeground" ResourceKey="OnPrimaryBrush" />

			<StaticResource x:Key="MaterialPrimaryModalNavigationBarMainCommandForeground" ResourceKey="OnPrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryModalNavigationBarForeground" ResourceKey="OnPrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryModalNavigationBarBackground" ResourceKey="PrimaryBrush" />

			<!-- Overflow AppBarButton Resources -->
			<StaticResource x:Key="NavigationBarOverflowAppBarButtonForeground" ResourceKey="OnPrimaryBrush" />
			<SolidColorBrush x:Key="NavigationBarOverflowAppBarButtonBackground"
							 Color="Transparent" />

			<!-- EllipsisButton Resources -->
			<StaticResource x:Key="NavigationBarEllipsisButtonForeground" ResourceKey="OnSurfaceBrush" />
			<SolidColorBrush x:Key="NavigationBarEllipsisButtonBackground"
							 Color="Transparent" />

			<x:Double x:Key="MaterialNavigationBarElevation">4</x:Double>
			<x:Double x:Key="MaterialXamlNavigationBarHeight">64</x:Double>
			<x:Double x:Key="MaterialNavigationBarHeight">64</x:Double>
			<Thickness x:Key="MaterialNavigationBarContentMargin">16,0,0,0</Thickness>
			<Thickness x:Key="MaterialAppBarEllipsisButtonInnerBorderMargin">2,6,6,6</Thickness>

			<StaticResource x:Key="NavigationBarMaterialEllipsisButtonFontFamily" ResourceKey="MaterialRegularFontFamily" />
			<FontWeight x:Key="NavigationBarMaterialEllipsisButtonFontWeight">SemiBold</FontWeight>
			<StaticResource x:Key="NavigationBarMaterialEllipsisButtonFontSize" ResourceKey="ControlContentThemeFontSize" />
			<StaticResource x:Key="NavigationBarMaterialEllipsisButtonWidth" ResourceKey="AppBarExpandButtonThemeWidth" />

			<x:Double x:Key="NavBarAppBarButtonContentHeight">16</x:Double>
			<x:Double x:Key="NavBarMainCommandAppBarButtonContentHeight">24</x:Double>
			<x:Double x:Key="NavBarAppBarThemeCompactHeight">64</x:Double>
			<Thickness x:Key="NavBarAppBarButtonPadding">12,16,12,16</Thickness>
			<Visibility x:Key="NavBarAppBarButtonHasFlyoutChevronVisibility">Collapsed</Visibility>
			<x:String x:Key="NavigationBarBackIconData">M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z</x:String>
		</ResourceDictionary>
		<ResourceDictionary x:Key="Light">
			<StaticResource x:Key="NavigationBarCommandBarEllipsisIconForegroundDisabled" ResourceKey="CommandBarEllipsisIconForegroundDisabled" />
			<StaticResource x:Key="NavigationBarCommandBarBackgroundCompactOpenUp" ResourceKey="SurfaceBrush" />
			<StaticResource x:Key="NavigationBarCommandBarBackgroundCompactOpenDown" ResourceKey="SurfaceBrush" />

			<StaticResource x:Key="NavigationBarMainCommandForeground" ResourceKey="OnSurfaceBrush" />
			<StaticResource x:Key="NavigationBarForeground" ResourceKey="OnSurfaceBrush" />
			<StaticResource x:Key="NavigationBarBackground" ResourceKey="SurfaceBrush" />
			<Thickness x:Key="NavigationBarPadding">4,0,0,0</Thickness>
			<StaticResource x:Key="NavigationBarFontFamily" ResourceKey="TitleLargeFontFamily" />
			<StaticResource x:Key="NavigationBarFontWeight" ResourceKey="TitleLargeFontWeight" />
			<StaticResource x:Key="NavigationBarFontSize" ResourceKey="TitleLargeFontSize" />

			<StaticResource x:Key="MaterialModalNavigationBarMainCommandForeground" ResourceKey="OnSurfaceBrush" />
			<StaticResource x:Key="MaterialModalNavigationBarForeground" ResourceKey="OnSurfaceBrush" />
			<StaticResource x:Key="MaterialModalNavigationBarBackground" ResourceKey="SurfaceBrush" />

			<StaticResource x:Key="MaterialPrimaryNavigationBarCommandBarEllipsisIconForegroundDisabled" ResourceKey="CommandBarEllipsisIconForegroundDisabled" />
			<StaticResource x:Key="MaterialPrimaryNavigationBarCommandBarBackgroundCompactOpenUp" ResourceKey="PrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryNavigationBarCommandBarBackgroundCompactOpenDown" ResourceKey="PrimaryBrush" />

			<StaticResource x:Key="MaterialPrimaryNavigationBarMainCommandForeground" ResourceKey="OnPrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryNavigationBarForeground" ResourceKey="OnPrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryNavigationBarBackground" ResourceKey="PrimaryBrush" />

			<StaticResource x:Key="MaterialPrimaryModalNavigationBarMainCommandForeground" ResourceKey="OnPrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryModalNavigationBarForeground" ResourceKey="OnPrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryModalNavigationBarBackground" ResourceKey="PrimaryBrush" />
			<StaticResource x:Key="MaterialPrimaryAppBarButtonForeground" ResourceKey="OnPrimaryBrush" />


			<StaticResource x:Key="NavigationBarOverflowAppBarButtonForeground" ResourceKey="OnPrimaryBrush" />
			<SolidColorBrush x:Key="NavigationBarOverflowAppBarButtonBackground"
							 Color="Transparent" />

			<StaticResource x:Key="NavigationBarEllipsisButtonForeground" ResourceKey="OnSurfaceBrush" />
			<SolidColorBrush x:Key="NavigationBarEllipsisButtonBackground"
							 Color="Transparent" />


			<x:Double x:Key="MaterialNavigationBarElevation">4</x:Double>
			<x:Double x:Key="MaterialXamlNavigationBarHeight">64</x:Double>
			<x:Double x:Key="MaterialNavigationBarHeight">64</x:Double>
			<Thickness x:Key="MaterialNavigationBarContentMargin">16,0,0,0</Thickness>

			<Thickness x:Key="MaterialAppBarEllipsisButtonInnerBorderMargin">2,6,6,6</Thickness>
			<StaticResource x:Key="NavigationBarMaterialEllipsisButtonFontFamily" ResourceKey="MaterialRegularFontFamily" />
			<FontWeight x:Key="NavigationBarMaterialEllipsisButtonFontWeight">SemiBold</FontWeight>
			<StaticResource x:Key="NavigationBarMaterialEllipsisButtonFontSize" ResourceKey="ControlContentThemeFontSize" />
			<StaticResource x:Key="NavigationBarMaterialEllipsisButtonWidth" ResourceKey="AppBarExpandButtonThemeWidth" />

			<x:Double x:Key="NavBarAppBarButtonContentHeight">16</x:Double>
			<x:Double x:Key="NavBarMainCommandAppBarButtonContentHeight">24</x:Double>
			<x:Double x:Key="NavBarAppBarThemeCompactHeight">64</x:Double>
			<Thickness x:Key="NavBarAppBarButtonPadding">12,16,12,16</Thickness>
			<Visibility x:Key="NavBarAppBarButtonHasFlyoutChevronVisibility">Collapsed</Visibility>
			<x:String x:Key="NavigationBarBackIconData">M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z</x:String>
		</ResourceDictionary>
	</ResourceDictionary.ThemeDictionaries>

	<Style x:Key="BaseMaterialNavigationBarStyle"
		   TargetType="utu:NavigationBar">
		<!-- Setting content to empty to avoid getting the datacontext -->
		<Setter Property="Content" Value="" />
		<Setter Property="ContentTemplate">
			<Setter.Value>
				<DataTemplate>
					<TextBlock Style="{StaticResource TitleLarge}"
							   Text="{Binding}" />
				</DataTemplate>
			</Setter.Value>
		</Setter>

		<android:Setter Property="(toolkit:UIElementExtensions.Elevation)"
						Value="{ThemeResource MaterialNavigationBarElevation}" />
		<Setter Property="HorizontalAlignment" Value="Stretch" />
		<Setter Property="VerticalAlignment" Value="Top" />
		<Setter Property="HorizontalContentAlignment" Value="Left" />
		<Setter Property="VerticalContentAlignment" Value="Center" />
		<Setter Property="OverflowButtonVisibility" Value="Collapsed" />
		<Setter Property="IsDynamicOverflowEnabled" Value="False" />
		<mobile:Setter Property="utu:SafeArea.Insets"
					   Value="Top" />
		<mobile:Setter Property="Template"
					   Value="{StaticResource MaterialNativeNavigationBarTemplate}" />
		<not_mobile:Setter Property="Template"
						   Value="{StaticResource XamlMaterialNavigationBarTemplate}" />
		<mobile:Setter Property="Height"
					   Value="NaN" />
	</Style>

	<!--#region Default Material NavigationBar-->
	<Style x:Key="MaterialMainCommandStyle"
		   TargetType="AppBarButton"
		   BasedOn="{StaticResource MaterialAppBarButtonStyle}">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="AppBarButton">
					<um:Ripple Feedback="{TemplateBinding Foreground}"
							   FeedbackOpacity="{StaticResource PressedOpacity}"
							   MinWidth="{TemplateBinding MinWidth}"
							   MaxWidth="{TemplateBinding MaxWidth}">
						<Grid x:Name="Root"
							  Background="Transparent">
							<VisualStateManager.VisualStateGroups>
								<VisualStateGroup x:Name="CommonStates">
									<VisualState x:Name="Normal" />

									<VisualState x:Name="PointerOver">
										<VisualState.Setters>
											<Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundPointerOver}" />
											<Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushPointerOver}" />
											<Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundPointerOver}" />
										</VisualState.Setters>
									</VisualState>

									<VisualState x:Name="Pressed">
										<VisualState.Setters>
											<Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundPressed}" />
											<Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushPressed}" />
											<Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundPressed}" />
										</VisualState.Setters>
									</VisualState>

									<VisualState x:Name="Disabled">
										<VisualState.Setters>
											<Setter Target="AppBarButtonInnerBorder.Background" Value="{ThemeResource AppBarButtonBackgroundDisabled}" />
											<Setter Target="AppBarButtonInnerBorder.BorderBrush" Value="{ThemeResource AppBarButtonBorderBrushDisabled}" />
											<Setter Target="Content.Foreground" Value="{ThemeResource AppBarButtonForegroundDisabled}" />
										</VisualState.Setters>
									</VisualState>
								</VisualStateGroup>
							</VisualStateManager.VisualStateGroups>

							<Border x:Name="AppBarButtonInnerBorder"
									Margin="{ThemeResource AppBarButtonInnerBorderMargin}"
									Background="{TemplateBinding Background}"
									BorderBrush="{TemplateBinding BorderBrush}"
									BorderThickness="{TemplateBinding BorderThickness}"
									Control.IsTemplateFocusTarget="True" />

							<Grid x:Name="ContentRoot"
								  VerticalAlignment="Center"
								  HorizontalAlignment="Center">
								<!-- UNO WORKAROUND: The ViewBox center should be horizontal Stretch but the Grid aligns the content left -->
								<Viewbox x:Name="ContentViewbox"
										 Height="{ThemeResource NavBarAppBarButtonContentHeight}"
										 Visibility="{Binding Path=Icon, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource NullToCollapsedConverter}}"
										 VerticalAlignment="Center"
										 HorizontalAlignment="Center"
										 AutomationProperties.AccessibilityView="Raw">
									<ContentPresenter x:Name="Content"
													  Content="{TemplateBinding Icon}"
													  Foreground="{TemplateBinding Foreground}" />
								</Viewbox>
								<PathIcon Data="{ThemeResource NavigationBarBackIconData}"
										  Visibility="{Binding Path=Icon, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource NullToVisibleConverter}}"
										  Foreground="{TemplateBinding Foreground}"
										  HorizontalAlignment="Center"
										  VerticalAlignment="Center" />
							</Grid>
						</Grid>
					</um:Ripple>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

	<Style x:Key="MaterialNavigationBarStyle"
		   BasedOn="{StaticResource BaseMaterialNavigationBarStyle}"
		   TargetType="utu:NavigationBar">
		<Setter Property="Background" Value="{ThemeResource NavigationBarBackground}" />
		<Setter Property="Foreground" Value="{ThemeResource NavigationBarForeground}" />
		<Setter Property="MainCommandStyle" Value="{StaticResource MaterialMainCommandStyle}" />
	</Style>

	<Style x:Key="MaterialNavigationBarPresenter"
		   TargetType="utu:NavigationBarPresenter">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="utu:NavigationBarPresenter">
					<Grid Background="{TemplateBinding Background}">
						<CommandBar x:Name="XamlNavigationBarCommandBar"
									Content="{TemplateBinding Content}"
									Margin="{TemplateBinding Padding}"
									Height="{ThemeResource NavBarAppBarThemeCompactHeight}"
									Style="{StaticResource MaterialNavigationBarCommandBar}" />
					</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

	<Style x:Key="MaterialNavigationBarCommandBar"
		   TargetType="CommandBar">
		<Setter Property="Padding" Value="{ThemeResource NavigationBarPadding}" />
		<Setter Property="IsTabStop" Value="False" />
		<Setter Property="VerticalAlignment" Value="Top" />
		<Setter Property="HorizontalAlignment" Value="Stretch" />
		<Setter Property="HorizontalContentAlignment" Value="Center" />
		<Setter Property="VerticalContentAlignment" Value="Top" />
		<Setter Property="ClosedDisplayMode" Value="Compact" />
		<Setter Property="ExitDisplayModeOnAccessKeyInvoked" Value="False" />
		<not_win:Setter Property="CornerRadius"
						Value="{ThemeResource ControlCornerRadius}" />

		<Setter Property="utu:CommandBarExtensions.MainCommand" Value="{x:Null}" />

		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="CommandBar">
					<Grid x:Name="LayoutRoot">
						<Grid.Resources>
							<StaticResource x:Key="AppBarButtonHasFlyoutChevronVisibility" ResourceKey="NavBarAppBarButtonHasFlyoutChevronVisibility" />
							<Storyboard x:Key="OverlayOpeningAnimation">
								<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
									<DiscreteDoubleKeyFrame KeyTime="0:0:0"
															Value="0" />
									<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
														  KeyTime="{StaticResource ControlNormalAnimationDuration}"
														  Value="1" />
								</DoubleAnimationUsingKeyFrames>
							</Storyboard>
							<Storyboard x:Key="OverlayClosingAnimation">
								<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
									<DiscreteDoubleKeyFrame KeyTime="0:0:0"
															Value="1" />
									<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
														  KeyTime="{StaticResource ControlFastAnimationDuration}"
														  Value="0" />
								</DoubleAnimationUsingKeyFrames>
							</Storyboard>
							<StaticResource x:Key="AppBarButtonContentHeight" ResourceKey="NavBarAppBarButtonContentHeight" />
							<StaticResource x:Key="AppBarThemeCompactHeight" ResourceKey="NavBarAppBarThemeCompactHeight" />
							<Style BasedOn="{StaticResource SplitButtonCommandBarStyle}"
								   TargetType="SplitButton" />
							<Style BasedOn="{StaticResource SplitButtonCommandBarStyle}"
								   TargetType="ToggleSplitButton" />
							<Style BasedOn="{StaticResource MaterialAppBarButtonStyle}"
								   TargetType="AppBarButton">
							</Style>

							<not_mobile:StaticResource x:Key="AppBarButtonHeight"
									   ResourceKey="MaterialXamlNavigationBarHeight" />
							<not_mobile:StaticResource x:Key="AppBarButtonWidth"
									   ResourceKey="MaterialXamlNavigationBarHeight" />

							<mobile:StaticResource x:Key="AppBarButtonHeight"
								   ResourceKey="MaterialNavigationBarHeight" />
							<mobile:StaticResource x:Key="AppBarButtonWidth"
								   ResourceKey="MaterialNavigationBarHeight" />
						</Grid.Resources>
						<Grid x:Name="ContentRoot"
							  Height="{TemplateBinding Height}"
							  MinHeight="{ThemeResource AppBarThemeCompactHeight}"
							  VerticalAlignment="Center"
							  Background="{TemplateBinding Background}"
							  XYFocusKeyboardNavigation="Enabled">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto"
												  MinWidth="6" />
							</Grid.ColumnDefinitions>
							<Grid.RenderTransform>
								<TranslateTransform x:Name="ContentTransform" />
							</Grid.RenderTransform>
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition x:Name="MainCommandColumnDefinition"
													  Width="Auto" />
									<ColumnDefinition x:Name="ContentControlColumnDefinition"
													  Width="*" />
									<ColumnDefinition x:Name="PrimaryItemsControlColumnDefinition"
													  Width="Auto" />
								</Grid.ColumnDefinitions>
								<ContentPresenter x:Name="MainCommandPresenter"
												  Content="{Binding Path=(utu:CommandBarExtensions.MainCommand), RelativeSource={RelativeSource TemplatedParent}}" />

								<!--
									Use a ContentControl rather than a ContentPresenter so that IsEnabled can be set to false
									in the Minimal/HiddenClosed states to remove it from being a tab-stop candidate.
									
									ContentControl spans columns 1 and 2 to allow proper centering when HorizontalContentAlignment is Center.
									This ensures the content centers across the available space without overlapping the MainCommand.
								-->
								<ContentControl x:Name="ContentControl"
												Grid.Column="1"
												Grid.ColumnSpan="2"
												Margin="{ThemeResource MaterialNavigationBarContentMargin}"
												HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
												VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
												HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
												VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
												Content="{TemplateBinding Content}"
												ContentTemplate="{TemplateBinding ContentTemplate}"
												ContentTransitions="{TemplateBinding ContentTransitions}"
												FontFamily="{ThemeResource NavigationBarFontFamily}"
												FontSize="{ThemeResource NavigationBarFontSize}"
												FontWeight="{ThemeResource NavigationBarFontWeight}"
												Foreground="{TemplateBinding Foreground}"
												IsTabStop="False" />
								<ItemsControl x:Name="PrimaryItemsControl"
											  Grid.Column="2"
											  MinHeight="{ThemeResource AppBarThemeCompactHeight}"
											  HorizontalAlignment="Center"
											  IsTabStop="False">
									<ItemsControl.ItemsPanel>
										<ItemsPanelTemplate>
											<StackPanel Orientation="Horizontal" />
										</ItemsPanelTemplate>
									</ItemsControl.ItemsPanel>
								</ItemsControl>
							</Grid>
							<Button x:Name="MoreButton"
									Grid.Column="2"
									MinHeight="{ThemeResource AppBarThemeCompactHeight}"
									Padding="{ThemeResource CommandBarMoreButtonMargin}"
									VerticalAlignment="Center"
									Control.IsTemplateKeyTipTarget="True"
									Foreground="{TemplateBinding Foreground}"
									IsAccessKeyScope="True"
									Style="{StaticResource MaterialEllipsisButton}">
								<FontIcon x:Name="EllipsisIcon"
										  Height="20"
										  VerticalAlignment="Center"
										  FontFamily="{ThemeResource SymbolThemeFontFamily}"
										  FontSize="20"
										  Glyph="&#xe712;"
										  RenderTransformOrigin="0.5, 0.5">
									<FontIcon.RenderTransform>
										<RotateTransform Angle="90" />
									</FontIcon.RenderTransform>
								</FontIcon>
							</Button>
							<!-- UNO WORKAROUND: Added IsHitTestVisible="False". The Rectangle was blocking pointer events -->
							<Rectangle x:Name="HighContrastBorder"
									   Grid.ColumnSpan="3"
									   VerticalAlignment="Stretch"
									   x:DeferLoadStrategy="Lazy"
									   IsHitTestVisible="False"
									   StrokeThickness="1"
									   Visibility="Collapsed" />
							<Border x:Name="OpenBorder"
									Grid.ColumnSpan="3"
									VerticalAlignment="Stretch"
									contract7NotPresent:CornerRadius="{ThemeResource ControlCornerRadius}"
									contract7Present:CornerRadius="{TemplateBinding CornerRadius}"
									Visibility="Collapsed" />
						</Grid>
						<!-- UNO WORKAROUND: Added IsTabStop="False". Navigation focus with keyboard was erroneously focusing on the Popup instead of the SecondaryCommands -->
						<Popup x:Name="OverflowPopup">
							<Popup.RenderTransform>
								<TransformGroup>
									<TranslateTransform x:Name="OverflowContentRootMarginOffsetTransform" />
									<TranslateTransform x:Name="OverflowContentRootTransform" X="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentHorizontalOffset}" />
								</TransformGroup>
							</Popup.RenderTransform>
							<Grid x:Name="OverflowContentRoot"
								  MinWidth="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentMinWidth}"
								  MaxWidth="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentMaxWidth}"
								  MaxHeight="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentMaxHeight}"
								  Opacity="0">
								<Grid.RowDefinitions>
									<RowDefinition />
									<RowDefinition Height="Auto" />
								</Grid.RowDefinitions>
								<!-- For 21H1 and up, we'll need to wrap the clip and presenter in a Grid which will host the Drop Shadow. -->
								<Grid x:Name="SecondaryItemsControlShadowWrapper"
									  contract7NotPresent:CornerRadius="{ThemeResource OverlayCornerRadius}"
									  contract7Present:CornerRadius="{ThemeResource OverlayCornerRadius}">
									<Grid.Clip>
										<RectangleGeometry Rect="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentClipRect}">
											<RectangleGeometry.Transform>
												<TransformGroup>
													<TranslateTransform x:Name="OverflowContentRootClipTransform" />
												</TransformGroup>
											</RectangleGeometry.Transform>
										</RectangleGeometry>
									</Grid.Clip>
									<CommandBarOverflowPresenter x:Name="SecondaryItemsControl"
																 IsTabStop="False"
																 Style="{TemplateBinding CommandBarOverflowPresenterStyle}">
										<CommandBarOverflowPresenter.RenderTransform>
											<TranslateTransform x:Name="OverflowContentTransform" />
										</CommandBarOverflowPresenter.RenderTransform>
										<CommandBarOverflowPresenter.ItemContainerStyle>
											<Style TargetType="FrameworkElement">
												<Setter Property="HorizontalAlignment" Value="Stretch" />
												<Setter Property="Width" Value="NaN" />
											</Style>
										</CommandBarOverflowPresenter.ItemContainerStyle>
									</CommandBarOverflowPresenter>
								</Grid>

								<!--
									In order to give us extra space in the windowed popup to translate things down,
									we add a rectangle to make the HWND taller than it otherwise would be.
								-->

								<Rectangle x:Name="WindowedPopupPadding"
										   Grid.Row="1"
										   Height="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
							</Grid>
						</Popup>
						<VisualStateManager.VisualStateGroups>
							<VisualStateGroup x:Name="CommonStates">
								<VisualState x:Name="Normal" />
								<VisualState x:Name="Disabled">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="EllipsisIcon"
																	   Storyboard.TargetProperty="Foreground">
											<DiscreteObjectKeyFrame KeyTime="0"
																	Value="{ThemeResource NavigationBarCommandBarEllipsisIconForegroundDisabled}" />
										</ObjectAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
							</VisualStateGroup>
							<VisualStateGroup x:Name="DisplayModeStates">
								<contract8Present:VisualStateGroup.Transitions>
									<!-- UNO WORKAROUND: Use literal value of ControlNormalAnimationDuration. Resolving a StaticResource string to a string non-DP causes an exception -->
									<VisualTransition GeneratedDuration="00:00:00.250"
													  From="CompactClosed"
													  To="CompactOpenDown">
										<Storyboard>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
																		   Storyboard.TargetProperty="Background">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="{ThemeResource NavigationBarCommandBarBackgroundCompactOpenDown}" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="OpenBorder"
																		   Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Visible" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																		   Storyboard.TargetProperty="VerticalAlignment">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Stretch" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="HighContrastBorder"
																		   Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Visible" />
											</ObjectAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																		   Storyboard.TargetProperty="Opacity">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="1" />
											</DoubleAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootTransform"
																		   Storyboard.TargetProperty="Y">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="{ThemeResource AppBarThemeCompactHeight}" />
												<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
																	  KeyTime="{StaticResource ControlNormalAnimationDuration}"
																	  Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
											</DoubleAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentTransform"
																		   Storyboard.TargetProperty="Y">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.NegativeOverflowContentHeight}" />
												<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
																	  KeyTime="{StaticResource ControlNormalAnimationDuration}"
																	  Value="0" />
											</DoubleAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
									<!-- UNO WORKAROUND: Use literal value of ControlFastAnimationDuration. Resolving a StaticResource string to a string non-DP causes an exception -->
									<VisualTransition GeneratedDuration="00:00:00.167"
													  From="CompactOpenDown"
													  To="CompactClosed">
										<Storyboard>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																		   Storyboard.TargetProperty="VerticalAlignment">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Stretch" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="HighContrastBorder"
																		   Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Visible" />
											</ObjectAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																		   Storyboard.TargetProperty="Opacity">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="1" />
												<DiscreteDoubleKeyFrame KeyTime="{StaticResource ControlFastAnimationDuration}"
																		Value="0" />
											</DoubleAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootTransform"
																		   Storyboard.TargetProperty="Y">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
												<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
																	  KeyTime="{StaticResource ControlFastAnimationDuration}"
																	  Value="{ThemeResource AppBarThemeCompactHeight}" />
											</DoubleAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentTransform"
																		   Storyboard.TargetProperty="Y">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="0" />
												<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
																	  KeyTime="{StaticResource ControlFastAnimationDuration}"
																	  Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.NegativeOverflowContentHeight}" />
											</DoubleAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
								</contract8Present:VisualStateGroup.Transitions>
								<VisualState x:Name="CompactClosed" />
								<VisualState x:Name="CompactOpenUp">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
																	   Storyboard.TargetProperty="Background">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="{ThemeResource NavigationBarCommandBarBackgroundCompactOpenUp}" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="OpenBorder"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Visible" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																	   Storyboard.TargetProperty="VerticalAlignment">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Stretch" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="HighContrastBorder"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Visible" />
										</ObjectAnimationUsingKeyFrames>
										<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																	   Storyboard.TargetProperty="Opacity">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="1" />
										</DoubleAnimationUsingKeyFrames>
										<contract8Present:DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootTransform"
																						Storyboard.TargetProperty="Y">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentCompactYTranslation}" />
										</contract8Present:DoubleAnimationUsingKeyFrames>
										<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootMarginOffsetTransform"
																	   Storyboard.TargetProperty="Y">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
										</DoubleAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
								<VisualState x:Name="CompactOpenDown">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
																	   Storyboard.TargetProperty="Background">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="{ThemeResource NavigationBarCommandBarBackgroundCompactOpenDown}" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="OpenBorder"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Visible" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																	   Storyboard.TargetProperty="VerticalAlignment">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Stretch" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="HighContrastBorder"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Visible" />
										</ObjectAnimationUsingKeyFrames>
										<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																	   Storyboard.TargetProperty="Opacity">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="1" />
										</DoubleAnimationUsingKeyFrames>
										<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootTransform"
																	   Storyboard.TargetProperty="Y">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
										</DoubleAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
							</VisualStateGroup>
							<VisualStateGroup x:Name="AvailableCommandsStates">
								<VisualState x:Name="BothCommands" />
								<VisualState x:Name="PrimaryCommandsOnly">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Collapsed" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Collapsed" />
										</ObjectAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
								<VisualState x:Name="SecondaryCommandsOnly">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PrimaryItemsControl"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Collapsed" />
										</ObjectAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
							</VisualStateGroup>
							<VisualStateGroup x:Name="DynamicOverflowStates">
								<VisualState x:Name="DynamicOverflowDisabled" />
								<VisualState x:Name="DynamicOverflowEnabled">
									<VisualState.Setters>
										<Setter Target="ContentControlColumnDefinition.Width" Value="Auto" />
										<Setter Target="PrimaryItemsControlColumnDefinition.Width" Value="*" />
									</VisualState.Setters>
								</VisualState>
							</VisualStateGroup>
						</VisualStateManager.VisualStateGroups>
					</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

	<!--#endregion-->

	<!--#region Default Modal Material NavigationBar-->
	<Style x:Key="MaterialModalNavigationBarStyle"
		   BasedOn="{StaticResource MaterialNavigationBarStyle}"
		   TargetType="utu:NavigationBar">
		<Setter Property="MainCommandStyle" Value="{StaticResource MaterialModalMainCommandStyle}" />
		<Setter Property="Background" Value="{ThemeResource MaterialModalNavigationBarBackground}" />
		<Setter Property="Foreground" Value="{ThemeResource MaterialModalNavigationBarForeground}" />
	</Style>

	<Style x:Key="MaterialModalMainCommandStyle"
		   BasedOn="{StaticResource MaterialMainCommandStyle}"
		   TargetType="AppBarButton">
		<Setter Property="Foreground" Value="{ThemeResource MaterialModalNavigationBarMainCommandForeground}" />
	</Style>
	<!--#endregion-->

	<!--#region Primary Material NavigationBar-->
	<Style x:Key="MaterialPrimaryMainCommandStyle"
		   BasedOn="{StaticResource MaterialMainCommandStyle}"
		   TargetType="AppBarButton">
		<Setter Property="Foreground" Value="{ThemeResource MaterialPrimaryNavigationBarMainCommandForeground}" />
	</Style>

	<Style x:Key="MaterialPrimaryNavigationBarStyle"
		   BasedOn="{StaticResource MaterialNavigationBarStyle}"
		   TargetType="utu:NavigationBar">
		<Setter Property="Background" Value="{ThemeResource MaterialPrimaryNavigationBarBackground}" />
		<Setter Property="Foreground" Value="{ThemeResource MaterialPrimaryNavigationBarForeground}" />
		<Setter Property="MainCommandStyle" Value="{StaticResource MaterialPrimaryMainCommandStyle}" />
		<not_mobile:Setter Property="Template"
						   Value="{StaticResource XamlMaterialPrimaryNavigationBarTemplate}" />
	</Style>

	<Style x:Key="MaterialPrimaryNavigationBarPresenter"
		   TargetType="utu:NavigationBarPresenter">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="utu:NavigationBarPresenter">
					<Grid Background="{TemplateBinding Background}">
						<CommandBar x:Name="XamlNavigationBarCommandBar"
									Content="{TemplateBinding Content}"
									Margin="{TemplateBinding Padding}"
									Height="{ThemeResource NavBarAppBarThemeCompactHeight}"
									Style="{StaticResource MaterialPrimaryNavigationBarCommandBar}" />
					</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

	<Style x:Key="MaterialPrimaryNavigationBarCommandBar"
		   TargetType="CommandBar">
		<Setter Property="Padding" Value="{ThemeResource NavigationBarPadding}" />
		<Setter Property="IsTabStop" Value="False" />
		<Setter Property="VerticalAlignment" Value="Top" />
		<Setter Property="HorizontalAlignment" Value="Stretch" />
		<Setter Property="HorizontalContentAlignment" Value="Center" />
		<Setter Property="VerticalContentAlignment" Value="Top" />
		<Setter Property="ClosedDisplayMode" Value="Compact" />
		<Setter Property="ExitDisplayModeOnAccessKeyInvoked" Value="False" />
		<not_win:Setter Property="CornerRadius"
						Value="{ThemeResource ControlCornerRadius}" />

		<Setter Property="utu:CommandBarExtensions.MainCommand" Value="{x:Null}" />

		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="CommandBar">
					<Grid x:Name="LayoutRoot">
						<Grid.Resources>
							<StaticResource x:Key="AppBarButtonHasFlyoutChevronVisibility" ResourceKey="NavBarAppBarButtonHasFlyoutChevronVisibility" />
							<Storyboard x:Key="OverlayOpeningAnimation">
								<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
									<DiscreteDoubleKeyFrame KeyTime="0:0:0"
															Value="0" />
									<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
														  KeyTime="{StaticResource ControlNormalAnimationDuration}"
														  Value="1" />
								</DoubleAnimationUsingKeyFrames>
							</Storyboard>
							<Storyboard x:Key="OverlayClosingAnimation">
								<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
									<DiscreteDoubleKeyFrame KeyTime="0:0:0"
															Value="1" />
									<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
														  KeyTime="{StaticResource ControlFastAnimationDuration}"
														  Value="0" />
								</DoubleAnimationUsingKeyFrames>
							</Storyboard>
							<StaticResource x:Key="AppBarButtonContentHeight" ResourceKey="NavBarAppBarButtonContentHeight" />
							<StaticResource x:Key="AppBarThemeCompactHeight" ResourceKey="NavBarAppBarThemeCompactHeight" />
							<Style BasedOn="{StaticResource SplitButtonCommandBarStyle}"
								   TargetType="SplitButton" />
							<Style BasedOn="{StaticResource SplitButtonCommandBarStyle}"
								   TargetType="ToggleSplitButton" />
							<Style BasedOn="{StaticResource MaterialPrimaryAppBarButtonStyle}"
								   TargetType="AppBarButton">
							</Style>

							<not_mobile:StaticResource x:Key="AppBarButtonHeight"
									   ResourceKey="MaterialXamlNavigationBarHeight" />
							<not_mobile:StaticResource x:Key="AppBarButtonWidth"
									   ResourceKey="MaterialXamlNavigationBarHeight" />

							<mobile:StaticResource x:Key="AppBarButtonHeight"
								   ResourceKey="MaterialNavigationBarHeight" />
							<mobile:StaticResource x:Key="AppBarButtonWidth"
								   ResourceKey="MaterialNavigationBarHeight" />
						</Grid.Resources>
						<Grid x:Name="ContentRoot"
							  Height="{TemplateBinding Height}"
							  MinHeight="{ThemeResource AppBarThemeCompactHeight}"
							  VerticalAlignment="Center"
							  Background="{TemplateBinding Background}"
							  XYFocusKeyboardNavigation="Enabled">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto"
												  MinWidth="6" />
							</Grid.ColumnDefinitions>
							<Grid.RenderTransform>
								<TranslateTransform x:Name="ContentTransform" />
							</Grid.RenderTransform>
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition x:Name="MainCommandColumnDefinition"
													  Width="Auto" />
									<ColumnDefinition x:Name="ContentControlColumnDefinition"
													  Width="*" />
									<ColumnDefinition x:Name="PrimaryItemsControlColumnDefinition"
													  Width="Auto" />
								</Grid.ColumnDefinitions>
								<ContentPresenter x:Name="MainCommandPresenter"
												  Content="{Binding Path=(utu:CommandBarExtensions.MainCommand), RelativeSource={RelativeSource TemplatedParent}}" />

								<!--
									Use a ContentControl rather than a ContentPresenter so that IsEnabled can be set to false
									in the Minimal/HiddenClosed states to remove it from being a tab-stop candidate.
									
									ContentControl spans columns 1 and 2 to allow proper centering when HorizontalContentAlignment is Center.
									This ensures the content centers across the available space without overlapping the MainCommand.
								-->
								<ContentControl x:Name="ContentControl"
												Grid.Column="1"
												Grid.ColumnSpan="2"
												Margin="{ThemeResource MaterialNavigationBarContentMargin}"
												HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
												VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
												HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
												VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
												Content="{TemplateBinding Content}"
												ContentTemplate="{TemplateBinding ContentTemplate}"
												ContentTransitions="{TemplateBinding ContentTransitions}"
												FontFamily="{ThemeResource NavigationBarFontFamily}"
												FontSize="{ThemeResource NavigationBarFontSize}"
												FontWeight="{ThemeResource NavigationBarFontWeight}"
												Foreground="{TemplateBinding Foreground}"
												IsTabStop="False" />
								<ItemsControl x:Name="PrimaryItemsControl"
											  Grid.Column="2"
											  MinHeight="{ThemeResource AppBarThemeCompactHeight}"
											  HorizontalAlignment="Center"
											  IsTabStop="False">
									<ItemsControl.ItemsPanel>
										<ItemsPanelTemplate>
											<StackPanel Orientation="Horizontal" />
										</ItemsPanelTemplate>
									</ItemsControl.ItemsPanel>
								</ItemsControl>
							</Grid>
							<Button x:Name="MoreButton"
									Grid.Column="2"
									MinHeight="{ThemeResource AppBarThemeCompactHeight}"
									Padding="{ThemeResource CommandBarMoreButtonMargin}"
									VerticalAlignment="Top"
									Control.IsTemplateKeyTipTarget="True"
									Foreground="{TemplateBinding Foreground}"
									IsAccessKeyScope="True"
									Style="{StaticResource MaterialEllipsisButton}">
								<FontIcon x:Name="EllipsisIcon"
										  Height="20"
										  VerticalAlignment="Center"
										  FontFamily="{ThemeResource SymbolThemeFontFamily}"
										  FontSize="20"
										  Glyph="&#xe712;"
										  RenderTransformOrigin="0.5, 0.5">
									<FontIcon.RenderTransform>
										<RotateTransform Angle="90" />
									</FontIcon.RenderTransform>
								</FontIcon>
							</Button>
							<!-- UNO WORKAROUND: Added IsHitTestVisible="False". The Rectangle was blocking pointer events -->
							<Rectangle x:Name="HighContrastBorder"
									   Grid.ColumnSpan="3"
									   VerticalAlignment="Stretch"
									   x:DeferLoadStrategy="Lazy"
									   IsHitTestVisible="False"
									   StrokeThickness="1"
									   Visibility="Collapsed" />
							<Border x:Name="OpenBorder"
									Grid.ColumnSpan="3"
									VerticalAlignment="Stretch"
									contract7NotPresent:CornerRadius="{ThemeResource ControlCornerRadius}"
									contract7Present:CornerRadius="{TemplateBinding CornerRadius}"
									Visibility="Collapsed" />
						</Grid>
						<!-- UNO WORKAROUND: Added IsTabStop="False". Navigation focus with keyboard was erroneously focusing on the Popup instead of the SecondaryCommands -->
						<Popup x:Name="OverflowPopup">
							<Popup.RenderTransform>
								<TransformGroup>
									<TranslateTransform x:Name="OverflowContentRootMarginOffsetTransform" />
									<TranslateTransform x:Name="OverflowContentRootTransform" X="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentHorizontalOffset}" />
								</TransformGroup>
							</Popup.RenderTransform>
							<Grid x:Name="OverflowContentRoot"
								  MinWidth="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentMinWidth}"
								  MaxWidth="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentMaxWidth}"
								  MaxHeight="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentMaxHeight}"
								  Opacity="0">
								<Grid.RowDefinitions>
									<RowDefinition />
									<RowDefinition Height="Auto" />
								</Grid.RowDefinitions>
								<!-- For 21H1 and up, we'll need to wrap the clip and presenter in a Grid which will host the Drop Shadow. -->
								<Grid x:Name="SecondaryItemsControlShadowWrapper"
									  contract7NotPresent:CornerRadius="{ThemeResource OverlayCornerRadius}"
									  contract7Present:CornerRadius="{ThemeResource OverlayCornerRadius}">
									<Grid.Clip>
										<RectangleGeometry Rect="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentClipRect}">
											<RectangleGeometry.Transform>
												<TransformGroup>
													<TranslateTransform x:Name="OverflowContentRootClipTransform" />
												</TransformGroup>
											</RectangleGeometry.Transform>
										</RectangleGeometry>
									</Grid.Clip>
									<CommandBarOverflowPresenter x:Name="SecondaryItemsControl"
																 IsTabStop="False"
																 Style="{TemplateBinding CommandBarOverflowPresenterStyle}">
										<CommandBarOverflowPresenter.RenderTransform>
											<TranslateTransform x:Name="OverflowContentTransform" />
										</CommandBarOverflowPresenter.RenderTransform>
										<CommandBarOverflowPresenter.ItemContainerStyle>
											<Style TargetType="FrameworkElement">
												<Setter Property="HorizontalAlignment" Value="Stretch" />
												<Setter Property="Width" Value="NaN" />
											</Style>
										</CommandBarOverflowPresenter.ItemContainerStyle>
									</CommandBarOverflowPresenter>
								</Grid>

								<!--
									In order to give us extra space in the windowed popup to translate things down,
									we add a rectangle to make the HWND taller than it otherwise would be.
								-->

								<Rectangle x:Name="WindowedPopupPadding"
										   Grid.Row="1"
										   Height="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
							</Grid>
						</Popup>
						<VisualStateManager.VisualStateGroups>
							<VisualStateGroup x:Name="CommonStates">
								<VisualState x:Name="Normal" />
								<VisualState x:Name="Disabled">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="EllipsisIcon"
																	   Storyboard.TargetProperty="Foreground">
											<DiscreteObjectKeyFrame KeyTime="0"
																	Value="{ThemeResource MaterialPrimaryNavigationBarCommandBarEllipsisIconForegroundDisabled}" />
										</ObjectAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
							</VisualStateGroup>
							<VisualStateGroup x:Name="DisplayModeStates">
								<contract8Present:VisualStateGroup.Transitions>
									<!-- UNO WORKAROUND: Use literal value of ControlNormalAnimationDuration. Resolving a StaticResource string to a string non-DP causes an exception -->
									<VisualTransition GeneratedDuration="00:00:00.250"
													  From="CompactClosed"
													  To="CompactOpenDown">
										<Storyboard>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
																		   Storyboard.TargetProperty="Background">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="{ThemeResource MaterialPrimaryNavigationBarCommandBarBackgroundCompactOpenDown}" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="OpenBorder"
																		   Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Visible" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																		   Storyboard.TargetProperty="VerticalAlignment">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Stretch" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="HighContrastBorder"
																		   Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Visible" />
											</ObjectAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																		   Storyboard.TargetProperty="Opacity">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="1" />
											</DoubleAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootTransform"
																		   Storyboard.TargetProperty="Y">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="{ThemeResource AppBarThemeCompactHeight}" />
												<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
																	  KeyTime="{StaticResource ControlNormalAnimationDuration}"
																	  Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
											</DoubleAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentTransform"
																		   Storyboard.TargetProperty="Y">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.NegativeOverflowContentHeight}" />
												<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
																	  KeyTime="{StaticResource ControlNormalAnimationDuration}"
																	  Value="0" />
											</DoubleAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
									<!-- UNO WORKAROUND: Use literal value of ControlFastAnimationDuration. Resolving a StaticResource string to a string non-DP causes an exception -->
									<VisualTransition GeneratedDuration="00:00:00.167"
													  From="CompactOpenDown"
													  To="CompactClosed">
										<Storyboard>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																		   Storyboard.TargetProperty="VerticalAlignment">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Stretch" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="HighContrastBorder"
																		   Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0"
																		Value="Visible" />
											</ObjectAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																		   Storyboard.TargetProperty="Opacity">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="1" />
												<DiscreteDoubleKeyFrame KeyTime="{StaticResource ControlFastAnimationDuration}"
																		Value="0" />
											</DoubleAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootTransform"
																		   Storyboard.TargetProperty="Y">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
												<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
																	  KeyTime="{StaticResource ControlFastAnimationDuration}"
																	  Value="{ThemeResource AppBarThemeCompactHeight}" />
											</DoubleAnimationUsingKeyFrames>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentTransform"
																		   Storyboard.TargetProperty="Y">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																		Value="0" />
												<SplineDoubleKeyFrame KeySpline="{StaticResource ControlFastOutSlowInKeySpline}"
																	  KeyTime="{StaticResource ControlFastAnimationDuration}"
																	  Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.NegativeOverflowContentHeight}" />
											</DoubleAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
								</contract8Present:VisualStateGroup.Transitions>
								<VisualState x:Name="CompactClosed" />
								<VisualState x:Name="CompactOpenUp">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
																	   Storyboard.TargetProperty="Background">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="{ThemeResource MaterialPrimaryNavigationBarCommandBarBackgroundCompactOpenUp}" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="OpenBorder"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Visible" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																	   Storyboard.TargetProperty="VerticalAlignment">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Stretch" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="HighContrastBorder"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Visible" />
										</ObjectAnimationUsingKeyFrames>
										<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																	   Storyboard.TargetProperty="Opacity">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="1" />
										</DoubleAnimationUsingKeyFrames>
										<contract8Present:DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootTransform"
																						Storyboard.TargetProperty="Y">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.OverflowContentCompactYTranslation}" />
										</contract8Present:DoubleAnimationUsingKeyFrames>
										<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootMarginOffsetTransform"
																	   Storyboard.TargetProperty="Y">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
										</DoubleAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
								<VisualState x:Name="CompactOpenDown">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRoot"
																	   Storyboard.TargetProperty="Background">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="{ThemeResource MaterialPrimaryNavigationBarCommandBarBackgroundCompactOpenDown}" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="OpenBorder"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Visible" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																	   Storyboard.TargetProperty="VerticalAlignment">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Stretch" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="HighContrastBorder"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Visible" />
										</ObjectAnimationUsingKeyFrames>
										<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																	   Storyboard.TargetProperty="Opacity">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="1" />
										</DoubleAnimationUsingKeyFrames>
										<DoubleAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRootTransform"
																	   Storyboard.TargetProperty="Y">
											<DiscreteDoubleKeyFrame KeyTime="0:0:0"
																	Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CommandBarTemplateSettings.ContentHeight}" />
										</DoubleAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
							</VisualStateGroup>
							<VisualStateGroup x:Name="AvailableCommandsStates">
								<VisualState x:Name="BothCommands" />
								<VisualState x:Name="PrimaryCommandsOnly">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="OverflowContentRoot"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Collapsed" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MoreButton"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Collapsed" />
										</ObjectAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
								<VisualState x:Name="SecondaryCommandsOnly">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PrimaryItemsControl"
																	   Storyboard.TargetProperty="Visibility">
											<DiscreteObjectKeyFrame KeyTime="0:0:0"
																	Value="Collapsed" />
										</ObjectAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
							</VisualStateGroup>
							<VisualStateGroup x:Name="DynamicOverflowStates">
								<VisualState x:Name="DynamicOverflowDisabled" />
								<VisualState x:Name="DynamicOverflowEnabled">
									<VisualState.Setters>
										<Setter Target="ContentControlColumnDefinition.Width" Value="Auto" />
										<Setter Target="PrimaryItemsControlColumnDefinition.Width" Value="*" />
									</VisualState.Setters>
								</VisualState>
							</VisualStateGroup>
						</VisualStateManager.VisualStateGroups>
					</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
	<!--#endregion-->

	<!--#region Primary Modal Material NavigationBar-->
	<Style x:Key="MaterialPrimaryModalNavigationBarStyle"
		   BasedOn="{StaticResource MaterialPrimaryNavigationBarStyle}"
		   TargetType="utu:NavigationBar">
		<Setter Property="Background" Value="{ThemeResource MaterialPrimaryModalNavigationBarBackground}" />
		<Setter Property="Foreground" Value="{ThemeResource MaterialPrimaryModalNavigationBarForeground}" />
		<Setter Property="MainCommandStyle" Value="{StaticResource MaterialPrimaryModalMainCommandStyle}" />
	</Style>

	<Style x:Key="MaterialPrimaryModalMainCommandStyle"
		   BasedOn="{StaticResource MaterialPrimaryMainCommandStyle}"
		   TargetType="AppBarButton">
		<Setter Property="Foreground" Value="{ThemeResource MaterialPrimaryModalNavigationBarMainCommandForeground}" />
	</Style>
	<!--#endregion-->

	<!--#region NavigationBar Buttons-->
	<Style x:Key="MaterialAppBarButtonOverflowStyle"
		   BasedOn="{StaticResource AppBarButtonOverflowStyle}"
		   TargetType="AppBarButton">
		<Setter Property="Background" Value="{ThemeResource NavigationBarOverflowAppBarButtonBackground}" />
		<Setter Property="Foreground" Value="{ThemeResource NavigationBarOverflowAppBarButtonForeground}" />
	</Style>

	<Style x:Key="MaterialEllipsisButton"
		   TargetType="Button">
		<Setter Property="Background" Value="{ThemeResource NavigationBarEllipsisButtonBackground}" />
		<Setter Property="Foreground" Value="{ThemeResource NavigationBarEllipsisButtonForeground}" />
		<Setter Property="BorderBrush" Value="Transparent" />
		<Setter Property="BorderThickness" Value="0" />
		<Setter Property="Padding" Value="0" />
		<Setter Property="HorizontalAlignment" Value="Stretch" />
		<Setter Property="HorizontalContentAlignment" Value="Center" />
		<Setter Property="VerticalAlignment" Value="Stretch" />
		<Setter Property="VerticalContentAlignment" Value="Center" />
		<Setter Property="FontFamily" Value="{ThemeResource NavigationBarMaterialEllipsisButtonFontFamily}" />
		<Setter Property="FontWeight" Value="{ThemeResource NavigationBarMaterialEllipsisButtonFontWeight}" />
		<Setter Property="FontSize" Value="{ThemeResource NavigationBarMaterialEllipsisButtonFontSize}" />
		<Setter Property="Width" Value="{ThemeResource NavigationBarMaterialEllipsisButtonWidth}" />
		<Setter Property="UseSystemFocusVisuals" Value="{StaticResource UseSystemFocusVisuals}" />
		<Setter Property="FocusVisualMargin" Value="-3" />
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="Button">
					<Grid Background="{TemplateBinding Background}"
						  BorderBrush="{TemplateBinding BorderBrush}"
						  BorderThickness="{TemplateBinding BorderThickness}">
						<um:Ripple Feedback="{TemplateBinding Foreground}"
								   FeedbackOpacity="{ThemeResource PressedOpacity}">
							<ContentPresenter x:Name="ContentPresenter"
											  Margin="{ThemeResource MaterialAppBarEllipsisButtonInnerBorderMargin}"
											  Padding="0"
											  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
											  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
											  contract7Present:CornerRadius="{TemplateBinding CornerRadius}"
											  AutomationProperties.AccessibilityView="Raw"
											  Background="{TemplateBinding Background}"
											  BorderBrush="{TemplateBinding BorderBrush}"
											  BorderThickness="{TemplateBinding BorderThickness}"
											  Content="{TemplateBinding Content}"
											  ContentTemplate="{TemplateBinding ContentTemplate}"
											  ContentTransitions="{TemplateBinding ContentTransitions}"
											  Control.IsTemplateFocusTarget="True" />
						</um:Ripple>

					</Grid>

				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

	<Style x:Key="MaterialPrimaryAppBarButtonStyle"
		   BasedOn="{StaticResource MaterialAppBarButtonStyle}"
		   TargetType="AppBarButton">
		<Setter Property="Foreground" Value="{ThemeResource MaterialPrimaryAppBarButtonForeground}" />
	</Style>

	<!--#endregion-->

	<!--#region Default NavigationBar style-->
	<Style x:Key="MaterialDefaultNavigationBarStyle"
		   TargetType="utu:NavigationBar"
		   BasedOn="{StaticResource MaterialNavigationBarStyle}" />
	<!--#endregion-->

	<ios:ControlTemplate x:Key="MaterialNativeNavigationBarTemplate"
						 TargetType="utu:NavigationBar">
		<Border BorderThickness="{TemplateBinding Padding}"
				Background="{TemplateBinding Background}">
			<!-- Setting Content to null to avoid the implicit binding to Content on the NativeNavigationBarPresenter -->
			<utu:NativeNavigationBarPresenter x:Name="NavigationBarPresenter"
											  Content="{x:Null}"
											  Height="44" />
		</Border>
	</ios:ControlTemplate>

	<android:ControlTemplate x:Key="MaterialNativeNavigationBarTemplate"
							 TargetType="utu:NavigationBar">
		<utu:NativeNavigationBarPresenter x:Name="NavigationBarPresenter" />
	</android:ControlTemplate>

	<ControlTemplate x:Key="XamlMaterialNavigationBarTemplate"
					 TargetType="utu:NavigationBar">
		<utu:NavigationBarPresenter x:Name="NavigationBarPresenter"
									Content="{TemplateBinding Content}"
									Padding="{TemplateBinding Padding}"
									Background="{TemplateBinding Background}"
									Style="{StaticResource MaterialNavigationBarPresenter}" />
	</ControlTemplate>

	<ControlTemplate x:Key="XamlMaterialPrimaryNavigationBarTemplate"
					 TargetType="utu:NavigationBar">
		<utu:NavigationBarPresenter x:Name="NavigationBarPresenter"
									Content="{TemplateBinding Content}"
									Background="{TemplateBinding Background}"
									Padding="{TemplateBinding Padding}"
									Style="{StaticResource MaterialPrimaryNavigationBarPresenter}" />
	</ControlTemplate>
</ResourceDictionary>
